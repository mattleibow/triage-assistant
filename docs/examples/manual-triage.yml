name: 'Manual Triage'

on:
  workflow_dispatch:
    inputs:
      issue_number:
        description: 'Issue number to triage'
        required: true
        type: number
      template_type:
        description: 'Triage template to use (leave empty for no AI analysis)'
        required: false
        type: choice
        options:
          - ''
          - multi-label
          - single-label
          - regression
          - missing-info
        default: 'multi-label'
      label_prefix:
        description: 'Label prefix (optional)'
        required: false
        type: string
        default: 'area-'
      specific_label:
        description: 'Specific label to apply (when not using AI templates)'
        required: false
        type: string
        default: ''

permissions:
  contents: read
  issues: write
  pull-requests: write
  models: read

jobs:
  manual-triage:
    runs-on: ubuntu-latest
    steps:
      - name: Triage specific issue
        uses: mattleibow/triage-assistant/apply-labels@v0.7.0
        with:
          issue: ${{ inputs.issue_number }}
          template: ${{ inputs.template_type }}
          label-prefix: ${{ inputs.label_prefix }}
          label: ${{ inputs.specific_label }}
          apply-labels: true
          apply-comment: true
